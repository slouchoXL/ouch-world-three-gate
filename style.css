:root{
  --bg:#000;
  --text:#d3d3d3;
  --muted:#757575;
  --chip:#111;
  --chip-border:#444;
}

*{ box-sizing:border-box }
html,body{ height:100% }
html, body { overscroll-behavior-x: none; }
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:ui-sans-serif,system-ui,-apple-system,Inter,Roboto,Arial,sans-serif;
  overflow:hidden;
}

/* Canvas fills screen */
#webgl{
  position:fixed; inset:0; display:block;
  width:100vw; height:100vh;
}

/* ----- Hover thirds overlay (desktop only) ----- */
/* Hover thirds overlay */
/* Hover lanes: stop hard-coding 3 thirds */
#lanes{
  position: fixed; inset: 0; pointer-events: none; z-index: 10;
}
#lanes .lane{
  position: absolute; top: 0; bottom: 0;
  pointer-events: auto; cursor: pointer;
}
/*#lanes .lane:nth-child(1){ left: 0; }
#lanes .lane:nth-child(2){ left: 33.3333%; }
#lanes .lane:nth-child(3){ left: 66.6666%; }
@media (hover:none){ #lanes{ display:none; } }*/

/* Footer icons (three equal thirds) */
/* Footer uses a dynamic column count that ui.js sets via --cols */
.footer{
  position: fixed;
  left: 0; right: 0; bottom: 12px;
  display: grid;
  grid-template-columns: repeat(var(--cols, 3), 1fr); /* <= key line */
  justify-items: center;
  align-items: center;
  width: 100vw;
  z-index: 25;
  pointer-events: auto;
}

/* Increase specificity so it definitely applies to the JS-rendered buttons */
.footer .footer-icon{
  font-size: 22px; line-height: 1;
  width: 44px; height: 44px; border-radius: 10px;
  border: 1px solid var(--chip-border);
  background: var(--chip);
  color: var(--text);
  cursor: pointer;
  transition: border-color .15s ease, transform .15s ease;
  display: inline-flex; align-items: center; justify-content: center;
}
.footer .footer-icon:hover{
  border-color:#888; color:#fff; transform: translateY(-1px);
}
/* Single pills rail (centered; JS re-anchors left/50/83%) */
#pillsRail{
  position: fixed; bottom: 62px; left: 50%; transform: translateX(-50%);
  display: flex; flex-wrap: wrap; gap: 8px; justify-content: center;
  max-width: min(94vw, 1000px); width: max-content;
  z-index: 25;
}
.pill{
  background: var(--chip); color: var(--text);
  border: 1px solid var(--chip-border); border-radius: 999px;
  padding: .45rem .9rem; cursor: pointer; font-weight: 600;
  font-size: 14px; line-height: 1.1;
  transition: border-color .15s ease, transform .15s ease;
}
@media (min-width:768px){ .pill{ font-size: 15px; } }
.pill:hover{ border-color:#888; color:#fff; transform: translateY(-1px); }
.pill.active{ border-color:#aaa; color:#fff; }

/* Desktop: pills fade in while hovering lanes/footer/pills */
@media (hover:hover){
  #pillsRail{ opacity: 0; pointer-events: none; transition: opacity .12s ease; }
  #lanes:hover ~ #pillsRail,
  .footer:hover ~ #pillsRail,
  #pillsRail:hover{ opacity: 1; pointer-events: auto; }
}

/* On touch devices: keep pills visible */
@media (hover:none){
  #pillsRail{ opacity: 1; pointer-events: auto; }
}
/* Overlay */
.modal { position: fixed; inset: 0; z-index: 40; background: rgba(0,0,0,0.66); }
.modal[hidden] { display: none; }
.modal-card {
  max-width: 90%; margin: 6vh auto; background:#0b0b0b; color:#fff;
  padding:15px; border-radius:12px; position: relative;
}
.modal-close {
  position:absolute; top:12px; right:16px; font-size:28px;
  background:none; border:0; color:#fff; cursor:pointer;
}

/* Stronger dim when overlay open */
#webgl.dim-3d{
  filter: grayscale(.7) brightness(.55) blur(1px);
  transition: filter .2s ease;
}

/* a11y focus */
.footer-icon:focus, .pill:focus, .modal-close:focus{
  outline: 2px solid #888; outline-offset: 2px;
}
